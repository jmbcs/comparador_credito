{"ast":null,"code":"import{AlertCircle,Building2,Calculator,CheckCircle,ChevronLeft,ChevronRight,CreditCard,Euro,Save,TrendingUp,X}from'lucide-react';import React,{useEffect,useState}from'react';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export const BankForm=_ref=>{let{bankName,data,onSave,onCancel,isEditing}=_ref;const[formData,setFormData]=useState(data);const[newBankName,setNewBankName]=useState(isEditing?bankName:'');const[errors,setErrors]=useState({});const[isSubmitting,setIsSubmitting]=useState(false);const[activeStep,setActiveStep]=useState(1);// No useEffect needed - the component will be recreated with the key prop\n// Bloquear scroll do body quando o modal estiver aberto\nuseEffect(()=>{document.body.classList.add('scroll-locked');return()=>{document.body.classList.remove('scroll-locked');};},[]);const validateForm=()=>{const newErrors={};if(!newBankName.trim()){newErrors.bankName='Nome do banco é obrigatório';}// Função auxiliar para validar campos numéricos\nconst validateNumericField=function(field,fieldName){let minValue=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;let allowZero=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;const value=formData[field];if(typeof value==='string'){if(value===''||value==='.'||value==='0'){newErrors[field]=`${fieldName} é obrigatório`;}else{const numValue=parseFloat(value);if(isNaN(numValue)){newErrors[field]=`${fieldName} deve ser um número válido`;}else if(!allowZero&&numValue<=minValue){newErrors[field]=`${fieldName} deve ser maior que ${minValue}`;}else if(allowZero&&numValue<minValue){newErrors[field]=`${fieldName} não pode ser menor que ${minValue}`;}}}else if(typeof value==='number'){if(!allowZero&&value<=minValue){newErrors[field]=`${fieldName} deve ser maior que ${minValue}`;}else if(allowZero&&value<minValue){newErrors[field]=`${fieldName} não pode ser menor que ${minValue}`;}}};validateNumericField('valor_emprestimo','Valor do empréstimo',0,false);validateNumericField('tempo_emprestimo','Tempo do empréstimo',0,false);// Removida validação obrigatória para taxa_fixa e periodo_fixa\nvalidateNumericField('seguro_vida','Seguro de vida',0,true);validateNumericField('seguro_multiriscos','Seguro multiriscos',0,true);validateNumericField('manutencao_conta','Manutenção de conta',0,true);validateNumericField('premios_entrada','Prémios de entrada',0,true);validateNumericField('comissoes_iniciais','Comissões iniciais',0,true);validateNumericField('outros','Outros custos',0,true);// Validação específica para anos de devolução do spread\nif(formData.devolucao_spread){const anosDevolucao=typeof formData.anos_devolucao_spread==='string'?parseFloat(formData.anos_devolucao_spread):formData.anos_devolucao_spread;const tempoEmprestimo=typeof formData.tempo_emprestimo==='string'?parseFloat(formData.tempo_emprestimo):formData.tempo_emprestimo;if(isNaN(anosDevolucao)||anosDevolucao<=0){newErrors.anos_devolucao_spread='Anos de devolução do spread deve ser maior que 0';}else if(anosDevolucao>tempoEmprestimo){newErrors.anos_devolucao_spread='Anos de devolução do spread não pode ser maior que o tempo do empréstimo';}}setErrors(newErrors);return Object.keys(newErrors).length===0;};const handleSubmit=async e=>{e.preventDefault();if(!validateForm()){// Se há erros, ir para o primeiro passo que contém erros\nconst errorFields=Object.keys(errors);if(errorFields.length>0){// Encontrar o primeiro passo com erro\nconst firstErrorField=errorFields[0];const stepWithError=getFieldStep(firstErrorField);setActiveStep(stepWithError);}return;}setIsSubmitting(true);try{// Converter todos os valores string para números antes de salvar\nconst processedData={...formData,valor_emprestimo:typeof formData.valor_emprestimo==='string'?parseFloat(formData.valor_emprestimo)||0:formData.valor_emprestimo,tempo_emprestimo:typeof formData.tempo_emprestimo==='string'?parseFloat(formData.tempo_emprestimo)||0:formData.tempo_emprestimo,taxa_fixa:typeof formData.taxa_fixa==='string'?parseFloat(formData.taxa_fixa)||0:formData.taxa_fixa,periodo_fixa:typeof formData.periodo_fixa==='string'?parseFloat(formData.periodo_fixa)||0:formData.periodo_fixa,euribor:typeof formData.euribor==='string'?parseFloat(formData.euribor)||0:formData.euribor,spread:typeof formData.spread==='string'?parseFloat(formData.spread)||0:formData.spread,seguro_vida:typeof formData.seguro_vida==='string'?parseFloat(formData.seguro_vida)||0:formData.seguro_vida,seguro_multiriscos:typeof formData.seguro_multiriscos==='string'?parseFloat(formData.seguro_multiriscos)||0:formData.seguro_multiriscos,manutencao_conta:typeof formData.manutencao_conta==='string'?parseFloat(formData.manutencao_conta)||0:formData.manutencao_conta,premios_entrada:typeof formData.premios_entrada==='string'?parseFloat(formData.premios_entrada)||0:formData.premios_entrada,comissoes_iniciais:typeof formData.comissoes_iniciais==='string'?parseFloat(formData.comissoes_iniciais)||0:formData.comissoes_iniciais,outros:typeof formData.outros==='string'?parseFloat(formData.outros)||0:formData.outros,anos_devolucao_spread:typeof formData.anos_devolucao_spread==='string'?parseFloat(formData.anos_devolucao_spread)||0:formData.anos_devolucao_spread};await onSave(newBankName,processedData);}finally{setIsSubmitting(false);}};const handleInputChange=(field,value)=>{setFormData(prev=>({...prev,[field]:value}));if(errors[field]){setErrors(prev=>({...prev,[field]:''}));}};const handleNumberInputChange=(field,value)=>{// Permitir strings vazias e qualquer padrão numérico válido durante a digitação\nif(value===''||value==='.'||value==='0'||/^0\\.$/.test(value)||/^0\\.\\d*$/.test(value)||/^\\d+\\.?\\d*$/.test(value)){// Manter como string para permitir digitação contínua\nsetFormData(prev=>({...prev,[field]:value}));}else{// Verificar se é um número válido\nconst numValue=parseFloat(value);if(!isNaN(numValue)){handleInputChange(field,numValue);}else{// Se não for um número válido, manter o valor anterior\nsetFormData(prev=>({...prev,[field]:prev[field]}));}}if(errors[field]){setErrors(prev=>({...prev,[field]:''}));}};const formatCurrency=value=>{return new Intl.NumberFormat('pt-PT',{style:'currency',currency:'EUR'}).format(value);};const formatPercentage=value=>{return`${value.toFixed(3)}%`;};// Função para calcular prestação mensal\nconst calcularPrestacao=(capital,taxaAnual,nMeses)=>{if(taxaAnual===0||nMeses===0)return 0;const taxaMensal=taxaAnual/12/100;return capital*taxaMensal*Math.pow(1+taxaMensal,nMeses)/(Math.pow(1+taxaMensal,nMeses)-1);};// Função para calcular capital em dívida após período fixo\nconst calcularCapitalRestante=(capitalInicial,taxaAnual,nMeses)=>{if(taxaAnual===0||nMeses===0)return capitalInicial;const taxaMensal=taxaAnual/12/100;const prestacao=calcularPrestacao(capitalInicial,taxaAnual,getNumericValue(formData.tempo_emprestimo)*12);// Calcular capital restante após nMeses de pagamentos\nlet capitalRestante=capitalInicial;for(let mes=1;mes<=nMeses;mes++){const juros=capitalRestante*taxaMensal;const amortizacao=prestacao-juros;capitalRestante=capitalRestante-amortizacao;}return Math.max(0,capitalRestante);};// Função para obter prestação usando mapa de dívida\nconst obterPrestacaoMapaDivida=(data,mes)=>{const{gerarMapaDivida}=require('../utils/calculations');// Converter dados para valores numéricos para os cálculos\nconst numericData={...data,valor_emprestimo:getNumericValue(data.valor_emprestimo),tempo_emprestimo:getNumericValue(data.tempo_emprestimo),taxa_fixa:getNumericValue(data.taxa_fixa),periodo_fixa:getNumericValue(data.periodo_fixa),euribor:getNumericValue(data.euribor),spread:getNumericValue(data.spread),seguro_vida:getNumericValue(data.seguro_vida),seguro_multiriscos:getNumericValue(data.seguro_multiriscos),manutencao_conta:getNumericValue(data.manutencao_conta),premios_entrada:getNumericValue(data.premios_entrada),comissoes_iniciais:getNumericValue(data.comissoes_iniciais),outros:getNumericValue(data.outros)};const debtMap=gerarMapaDivida(numericData,'temp');const entry=debtMap.find(entry=>entry.Mês===mes);return entry?entry[\"Prestação (€)\"]:0;};// Função auxiliar para obter valores numéricos de forma segura\nconst getNumericValue=value=>{if(typeof value==='number')return value;if(typeof value==='string'){const parsed=parseFloat(value);return isNaN(parsed)?0:parsed;}return 0;};// Função para obter o nome do campo em português\nconst getFieldName=field=>{const fieldNames={bankName:'Nome do Banco',valor_emprestimo:'Valor do Empréstimo',tempo_emprestimo:'Tempo do Empréstimo',taxa_fixa:'Taxa Fixa',periodo_fixa:'Período Fixo',euribor:'Euribor',spread:'Spread',seguro_vida:'Seguro de Vida',seguro_multiriscos:'Seguro Multiriscos',manutencao_conta:'Manutenção de Conta',outros:'Outros Custos',premios_entrada:'Prémios de Entrada',comissoes_iniciais:'Comissões Iniciais',anos_devolucao_spread:'Anos de Devolução do Spread'};return fieldNames[field]||field;};// Função para obter o passo onde o campo está localizado\nconst getFieldStep=field=>{const fieldToStep={bankName:1,valor_emprestimo:1,tempo_emprestimo:1,taxa_fixa:2,periodo_fixa:2,euribor:2,spread:2,seguro_vida:2,seguro_multiriscos:2,manutencao_conta:2,outros:2,anos_devolucao_spread:2,premios_entrada:3,comissoes_iniciais:3};return fieldToStep[field]||1;};const totalMonthlyCosts=getNumericValue(formData.seguro_vida)+getNumericValue(formData.seguro_multiriscos)+getNumericValue(formData.manutencao_conta)+getNumericValue(formData.outros);const steps=[{id:1,title:'Informações Básicas',icon:Building2,color:'blue'},{id:2,title:'Taxas e Custos',icon:Calculator,color:'green'},{id:3,title:'Outflow Inicial',icon:CreditCard,color:'purple'},{id:4,title:'Resumo',icon:CheckCircle,color:'emerald'}];const renderStepContent=()=>{var _formData$taxa_fixa,_formData$periodo_fix;switch(activeStep){case 1:return/*#__PURE__*/_jsx(\"div\",{className:\"space-y-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl border border-gray-200 p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3 mb-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-2 bg-blue-100 rounded-lg\",children:/*#__PURE__*/_jsx(Building2,{className:\"h-5 w-5 text-blue-600\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900\",children:\"Informa\\xE7\\xF5es B\\xE1sicas\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-5\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Nome do Banco *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newBankName,onChange:e=>{setNewBankName(e.target.value);if(errors.bankName)setErrors(prev=>({...prev,bankName:''}));},className:`input ${errors.bankName?'input-error':''}`,placeholder:\"Ex: Banco de Portugal\"}),errors.bankName&&/*#__PURE__*/_jsxs(\"p\",{className:\"form-error\",children:[/*#__PURE__*/_jsx(AlertCircle,{className:\"h-4 w-4\"}),/*#__PURE__*/_jsx(\"span\",{children:errors.bankName})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Valor do Empr\\xE9stimo (\\u20AC) *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:typeof formData.valor_emprestimo==='string'?formData.valor_emprestimo:formData.valor_emprestimo||'',onChange:e=>handleNumberInputChange('valor_emprestimo',e.target.value),className:`input ${errors.valor_emprestimo?'input-error':''}`,placeholder:\"Ex: 200000\"}),errors.valor_emprestimo&&/*#__PURE__*/_jsxs(\"p\",{className:\"form-error\",children:[/*#__PURE__*/_jsx(AlertCircle,{className:\"h-4 w-4\"}),/*#__PURE__*/_jsx(\"span\",{children:errors.valor_emprestimo})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Prazo (anos) *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:typeof formData.tempo_emprestimo==='string'?formData.tempo_emprestimo:formData.tempo_emprestimo||'',onChange:e=>handleNumberInputChange('tempo_emprestimo',e.target.value),className:`input ${errors.tempo_emprestimo?'input-error':''}`,placeholder:\"Ex: 30\"}),errors.tempo_emprestimo&&/*#__PURE__*/_jsxs(\"p\",{className:\"form-error\",children:[/*#__PURE__*/_jsx(AlertCircle,{className:\"h-4 w-4\"}),/*#__PURE__*/_jsx(\"span\",{children:errors.tempo_emprestimo})]})]})]})]})});case 2:return/*#__PURE__*/_jsx(\"div\",{className:\"space-y-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl border border-gray-200 p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3 mb-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-2 bg-green-100 rounded-lg\",children:/*#__PURE__*/_jsx(Calculator,{className:\"h-5 w-5 text-green-600\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900\",children:\"Taxas e Custos Mensais\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-semibold text-gray-800 text-base\",children:\"Taxas\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Taxa Fixa (%)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:String(formData.taxa_fixa)==='0'?'0':(_formData$taxa_fixa=formData.taxa_fixa)!==null&&_formData$taxa_fixa!==void 0?_formData$taxa_fixa:'',onChange:e=>handleNumberInputChange('taxa_fixa',e.target.value),className:`input ${errors.taxa_fixa?'input-error':''}`,placeholder:\"Ex: 3.5\"}),errors.taxa_fixa&&/*#__PURE__*/_jsxs(\"p\",{className:\"form-error\",children:[/*#__PURE__*/_jsx(AlertCircle,{className:\"h-4 w-4\"}),/*#__PURE__*/_jsx(\"span\",{children:errors.taxa_fixa})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Per\\xEDodo Fixo (anos)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:String(formData.periodo_fixa)==='0'?'0':(_formData$periodo_fix=formData.periodo_fixa)!==null&&_formData$periodo_fix!==void 0?_formData$periodo_fix:'',onChange:e=>handleNumberInputChange('periodo_fixa',e.target.value),className:\"input\",placeholder:\"Ex: 2\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Euribor (%)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:typeof formData.euribor==='string'?formData.euribor:formData.euribor||'',onChange:e=>handleNumberInputChange('euribor',e.target.value),className:\"input\",placeholder:\"Ex: 2.081\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Spread (%)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:typeof formData.spread==='string'?formData.spread:formData.spread||'',onChange:e=>handleNumberInputChange('spread',e.target.value),className:`input ${errors.spread?'input-error':''}`,placeholder:\"Ex: 0.5\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-semibold text-gray-800 text-base\",children:\"Custos Mensais\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Seguro de Vida (\\u20AC/m\\xEAs)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:typeof formData.seguro_vida==='string'?formData.seguro_vida:formData.seguro_vida||'',onChange:e=>handleNumberInputChange('seguro_vida',e.target.value),className:`input ${errors.seguro_vida?'input-error':''}`,placeholder:\"Ex: 5.00\"}),errors.seguro_vida&&/*#__PURE__*/_jsxs(\"p\",{className:\"form-error\",children:[/*#__PURE__*/_jsx(AlertCircle,{className:\"h-4 w-4\"}),/*#__PURE__*/_jsx(\"span\",{children:errors.seguro_vida})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Seguro Multirriscos (\\u20AC/m\\xEAs)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:typeof formData.seguro_multiriscos==='string'?formData.seguro_multiriscos:formData.seguro_multiriscos||'',onChange:e=>handleNumberInputChange('seguro_multiriscos',e.target.value),className:`input ${errors.seguro_multiriscos?'input-error':''}`,placeholder:\"Ex: 3.50\"}),errors.seguro_multiriscos&&/*#__PURE__*/_jsxs(\"p\",{className:\"form-error\",children:[/*#__PURE__*/_jsx(AlertCircle,{className:\"h-4 w-4\"}),/*#__PURE__*/_jsx(\"span\",{children:errors.seguro_multiriscos})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Manuten\\xE7\\xE3o de Conta (\\u20AC/m\\xEAs)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:typeof formData.manutencao_conta==='string'?formData.manutencao_conta:formData.manutencao_conta||'',onChange:e=>handleNumberInputChange('manutencao_conta',e.target.value),className:`input ${errors.manutencao_conta?'input-error':''}`,placeholder:\"Ex: 10.00\"}),errors.manutencao_conta&&/*#__PURE__*/_jsxs(\"p\",{className:\"form-error\",children:[/*#__PURE__*/_jsx(AlertCircle,{className:\"h-4 w-4\"}),/*#__PURE__*/_jsx(\"span\",{children:errors.manutencao_conta})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Outros Custos (\\u20AC/m\\xEAs)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:typeof formData.outros==='string'?formData.outros:formData.outros||'',onChange:e=>handleNumberInputChange('outros',e.target.value),className:`input ${errors.outros?'input-error':''}`,placeholder:\"Ex: 5.00\"}),errors.outros&&/*#__PURE__*/_jsxs(\"p\",{className:\"form-error\",children:[/*#__PURE__*/_jsx(AlertCircle,{className:\"h-4 w-4\"}),/*#__PURE__*/_jsx(\"span\",{children:errors.outros})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3 p-4 bg-gray-50 rounded-lg border border-gray-200\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"devolucao_spread\",checked:formData.devolucao_spread,onChange:e=>handleInputChange('devolucao_spread',e.target.checked),className:\"rounded border-gray-300 text-green-600 focus:ring-green-500 h-5 w-5\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"devolucao_spread\",className:\"text-sm font-medium text-gray-700\",children:\"Devolu\\xE7\\xE3o do Spread\"})]}),formData.devolucao_spread&&/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Anos de Dura\\xE7\\xE3o da Devolu\\xE7\\xE3o do Spread\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:\"0\",max:getNumericValue(formData.tempo_emprestimo),value:typeof formData.anos_devolucao_spread==='string'?formData.anos_devolucao_spread:formData.anos_devolucao_spread||'',onChange:e=>handleNumberInputChange('anos_devolucao_spread',e.target.value),className:`input ${errors.anos_devolucao_spread?'input-error':''}`,placeholder:\"Ex: 2\"}),errors.anos_devolucao_spread&&/*#__PURE__*/_jsxs(\"p\",{className:\"form-error\",children:[/*#__PURE__*/_jsx(AlertCircle,{className:\"h-4 w-4\"}),/*#__PURE__*/_jsx(\"span\",{children:errors.anos_devolucao_spread})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 mt-1\",children:\"Define por quantos anos a devolu\\xE7\\xE3o do spread ser\\xE1 aplicada\"})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"p-4 bg-green-50 rounded-lg border border-green-200\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-gray-700\",children:\"Total Custos Mensais:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold text-lg text-green-700\",children:formatCurrency(totalMonthlyCosts)})]})})]})]})});case 3:return/*#__PURE__*/_jsx(\"div\",{className:\"space-y-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl border border-gray-200 p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3 mb-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-2 bg-purple-100 rounded-lg\",children:/*#__PURE__*/_jsx(CreditCard,{className:\"h-5 w-5 text-purple-600\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900\",children:\"Outflow Inicial\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-5\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Pr\\xE9mios de Entrada (\\u20AC)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:typeof formData.premios_entrada==='string'?formData.premios_entrada:formData.premios_entrada||'',onChange:e=>handleNumberInputChange('premios_entrada',e.target.value),className:`input ${errors.premios_entrada?'input-error':''}`,placeholder:\"Ex: 200.00\"}),errors.premios_entrada&&/*#__PURE__*/_jsxs(\"p\",{className:\"form-error\",children:[/*#__PURE__*/_jsx(AlertCircle,{className:\"h-4 w-4\"}),/*#__PURE__*/_jsx(\"span\",{children:errors.premios_entrada})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Comiss\\xF5es Iniciais (\\u20AC)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:typeof formData.comissoes_iniciais==='string'?formData.comissoes_iniciais:formData.comissoes_iniciais||'',onChange:e=>handleNumberInputChange('comissoes_iniciais',e.target.value),className:`input ${errors.comissoes_iniciais?'input-error':''}`,placeholder:\"Ex: 300.00\"}),errors.comissoes_iniciais&&/*#__PURE__*/_jsxs(\"p\",{className:\"form-error\",children:[/*#__PURE__*/_jsx(AlertCircle,{className:\"h-4 w-4\"}),/*#__PURE__*/_jsx(\"span\",{children:errors.comissoes_iniciais})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center p-4 bg-green-50 rounded-lg border border-green-200\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-gray-700\",children:\"Pr\\xE9mios de Entrada:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-semibold text-green-700\",children:[\"+\",formatCurrency(getNumericValue(formData.premios_entrada))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center p-4 bg-red-50 rounded-lg border border-red-200\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-gray-700\",children:\"Comiss\\xF5es Iniciais:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-semibold text-red-700\",children:[\"-\",formatCurrency(getNumericValue(formData.comissoes_iniciais))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center p-4 bg-blue-50 rounded-lg border border-blue-200\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-gray-700\",children:\"Saldo Inicial:\"}),/*#__PURE__*/_jsxs(\"span\",{className:`font-semibold text-lg ${getNumericValue(formData.premios_entrada)>=getNumericValue(formData.comissoes_iniciais)?'text-green-700':'text-red-700'}`,children:[getNumericValue(formData.premios_entrada)>=getNumericValue(formData.comissoes_iniciais)?'+':'',formatCurrency(getNumericValue(formData.premios_entrada)-getNumericValue(formData.comissoes_iniciais))]})]})]})]})]})});case 4:return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"hidden\",value:\"summary\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl border border-gray-200 p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3 mb-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-2 bg-emerald-100 rounded-lg\",children:/*#__PURE__*/_jsx(CheckCircle,{className:\"h-5 w-5 text-emerald-600\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900\",children:\"Resumo da Proposta\"})]}),Object.keys(errors).length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-red-50 p-4 rounded-lg border border-red-200 mb-6\",children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"font-semibold text-red-900 mb-3 flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(AlertCircle,{className:\"h-4 w-4 text-red-600\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Erros no Formul\\xE1rio\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-red-700 mb-3\",children:\"Por favor, corrija os seguintes erros antes de guardar o banco:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2\",children:Object.entries(errors).map(_ref2=>{let[field,error]=_ref2;return/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start space-x-2 p-2 bg-red-100 rounded-lg\",children:[/*#__PURE__*/_jsx(AlertCircle,{className:\"h-4 w-4 text-red-600 mt-0.5 flex-shrink-0\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"font-medium text-red-800\",children:[getFieldName(field),\":\"]}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-red-700\",children:error})]}),/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:()=>setActiveStep(getFieldStep(field)),className:\"text-xs text-red-600 hover:text-red-800 underline mt-1\",children:[\"Ir para o Passo \",getFieldStep(field),\" para corrigir\"]})]})]},field);})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"data-grid mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"data-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"data-label\",children:\"Valor do Empr\\xE9stimo\"}),/*#__PURE__*/_jsx(\"div\",{className:\"data-value\",children:formatCurrency(getNumericValue(formData.valor_emprestimo))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"data-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"data-label\",children:\"Prazo Total\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"data-value\",children:[getNumericValue(formData.tempo_emprestimo),\" anos\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-500\",children:[\"(\",getNumericValue(formData.tempo_emprestimo)*12,\" meses)\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"data-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"data-label\",children:\"Taxa Fixa\"}),/*#__PURE__*/_jsx(\"div\",{className:\"data-value\",children:formatPercentage(getNumericValue(formData.taxa_fixa))}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-500\",children:[\"Per\\xEDodo: \",getNumericValue(formData.periodo_fixa),\" anos\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"data-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"data-label\",children:\"Custos Mensais\"}),/*#__PURE__*/_jsx(\"div\",{className:\"data-value\",children:formatCurrency(totalMonthlyCosts)})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"data-grid mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"data-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"data-label\",children:\"Euribor\"}),/*#__PURE__*/_jsx(\"div\",{className:\"data-value\",children:formatPercentage(getNumericValue(formData.euribor))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"data-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"data-label\",children:\"Spread\"}),/*#__PURE__*/_jsx(\"div\",{className:\"data-value\",children:formatPercentage(getNumericValue(formData.spread))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"data-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"data-label\",children:\"Devolu\\xE7\\xE3o Spread\"}),/*#__PURE__*/_jsx(\"div\",{className:\"data-value\",children:formData.devolucao_spread?`Sim (${getNumericValue(formData.anos_devolucao_spread)} anos)`:'Não'})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"data-card\",children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"font-semibold text-gray-800 mb-3 flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(Calculator,{className:\"h-4 w-4 text-blue-600\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Presta\\xE7\\xE3o Per\\xEDodo Fixo\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600\",children:\"Taxa Aplicada:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium text-blue-700\",children:formatPercentage(getNumericValue(formData.taxa_fixa))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600\",children:\"Dura\\xE7\\xE3o:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-medium\",children:[getNumericValue(formData.periodo_fixa),\" anos\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600\",children:\"Presta\\xE7\\xE3o Mensal:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold text-lg text-blue-700\",children:formatCurrency(obterPrestacaoMapaDivida(formData,1))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600\",children:\"Total com Custos:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold text-lg text-blue-700\",children:formatCurrency(obterPrestacaoMapaDivida(formData,1)+totalMonthlyCosts)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm text-gray-600\",children:[\"Capital em D\\xEDvida (ap\\xF3s \",getNumericValue(formData.periodo_fixa),\" anos):\"]}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium text-blue-600\",children:formatCurrency(calcularCapitalRestante(getNumericValue(formData.valor_emprestimo),getNumericValue(formData.taxa_fixa),getNumericValue(formData.periodo_fixa)*12))})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"data-card\",children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"font-semibold text-gray-800 mb-3 flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(TrendingUp,{className:\"h-4 w-4 text-purple-600\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Presta\\xE7\\xE3o Per\\xEDodo Vari\\xE1vel\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600\",children:\"Taxa Aplicada:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium text-purple-700\",children:formatPercentage(getNumericValue(formData.euribor)+getNumericValue(formData.spread))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600\",children:\"Dura\\xE7\\xE3o:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:getNumericValue(formData.periodo_fixa)>=getNumericValue(formData.tempo_emprestimo)?'N/A (apenas período fixo)':`${getNumericValue(formData.tempo_emprestimo)-getNumericValue(formData.periodo_fixa)} anos`})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600\",children:\"Presta\\xE7\\xE3o Mensal:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold text-lg text-purple-700\",children:getNumericValue(formData.periodo_fixa)>=getNumericValue(formData.tempo_emprestimo)?'N/A (apenas período fixo)':formatCurrency(obterPrestacaoMapaDivida(formData,getNumericValue(formData.periodo_fixa)*12+1))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600\",children:\"Total com Custos:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold text-lg text-purple-700\",children:getNumericValue(formData.periodo_fixa)>=getNumericValue(formData.tempo_emprestimo)?'N/A (apenas período fixo)':formatCurrency(obterPrestacaoMapaDivida(formData,getNumericValue(formData.periodo_fixa)*12+1)+totalMonthlyCosts)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600\",children:\"Capital em D\\xEDvida (in\\xEDcio per\\xEDodo vari\\xE1vel):\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium text-purple-600\",children:getNumericValue(formData.periodo_fixa)>=getNumericValue(formData.tempo_emprestimo)?'N/A (apenas período fixo)':formatCurrency(calcularCapitalRestante(getNumericValue(formData.valor_emprestimo),getNumericValue(formData.taxa_fixa),getNumericValue(formData.periodo_fixa)*12))})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"data-card\",children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"font-semibold text-gray-800 mb-3 flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(CreditCard,{className:\"h-4 w-4 text-emerald-600\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Custos Mensais Detalhados\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600\",children:\"Seguro de Vida:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:formatCurrency(getNumericValue(formData.seguro_vida))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600\",children:\"Seguro Multirriscos:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:formatCurrency(getNumericValue(formData.seguro_multiriscos))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600\",children:\"Manuten\\xE7\\xE3o de Conta:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:formatCurrency(getNumericValue(formData.manutencao_conta))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600\",children:\"Outros Custos:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:formatCurrency(getNumericValue(formData.outros))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"border-t pt-2 flex justify-between font-semibold text-emerald-700\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Total Mensal:\"}),/*#__PURE__*/_jsx(\"span\",{children:formatCurrency(totalMonthlyCosts)})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"data-card\",children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"font-semibold text-gray-800 mb-3 flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(Euro,{className:\"h-4 w-4 text-emerald-600\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Outflow Inicial\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600\",children:\"Pr\\xE9mios de Entrada:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-medium text-green-700\",children:[\"+\",formatCurrency(getNumericValue(formData.premios_entrada))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600\",children:\"Comiss\\xF5es Iniciais:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-medium text-orange-700\",children:[\"-\",formatCurrency(getNumericValue(formData.comissoes_iniciais))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"border-t pt-2 flex justify-between font-semibold\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Saldo Inicial:\"}),/*#__PURE__*/_jsxs(\"span\",{className:`${getNumericValue(formData.premios_entrada)>=getNumericValue(formData.comissoes_iniciais)?'text-green-700':'text-red-700'}`,children:[getNumericValue(formData.premios_entrada)>=getNumericValue(formData.comissoes_iniciais)?'+':'',formatCurrency(getNumericValue(formData.premios_entrada)-getNumericValue(formData.comissoes_iniciais))]})]})]})]})]}),formData.amortizacoes&&formData.amortizacoes.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"data-card mb-6\",children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"font-semibold text-gray-800 mb-3 flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(TrendingUp,{className:\"h-4 w-4 text-emerald-600\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Amortiza\\xE7\\xF5es Antecipadas\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"data-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"data-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"data-label\",children:\"Total Amortiza\\xE7\\xF5es\"}),/*#__PURE__*/_jsx(\"div\",{className:\"data-value\",children:formatCurrency(formData.amortizacoes.reduce((total,a)=>total+a.valor,0))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"data-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"data-label\",children:\"N\\xFAmero de Amortiza\\xE7\\xF5es\"}),/*#__PURE__*/_jsx(\"div\",{className:\"data-value\",children:formData.amortizacoes.length})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"data-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"data-label\",children:\"M\\xE9dia por Amortiza\\xE7\\xE3o\"}),/*#__PURE__*/_jsx(\"div\",{className:\"data-value\",children:formatCurrency(formData.amortizacoes.reduce((total,a)=>total+a.valor,0)/formData.amortizacoes.length)})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-blue-50 p-4 rounded-lg border border-blue-200\",children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"font-semibold text-blue-900 mb-3 flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(CheckCircle,{className:\"h-4 w-4 text-blue-600\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Resumo Final da Proposta\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"data-grid text-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"data-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"data-label\",children:\"Valor Total\"}),/*#__PURE__*/_jsx(\"div\",{className:\"data-value\",children:formatCurrency(getNumericValue(formData.valor_emprestimo))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"data-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"data-label\",children:\"Custos Anuais\"}),/*#__PURE__*/_jsx(\"div\",{className:\"data-value\",children:formatCurrency(totalMonthlyCosts*12)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"data-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"data-label\",children:\"Custos Iniciais\"}),/*#__PURE__*/_jsx(\"div\",{className:\"data-value\",children:formatCurrency(getNumericValue(formData.comissoes_iniciais))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"data-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"data-label\",children:\"Pr\\xE9mios de Entrada\"}),/*#__PURE__*/_jsx(\"div\",{className:\"data-value\",children:formatCurrency(getNumericValue(formData.premios_entrada))})]})]})]})]})]});default:return null;}};return/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-2xl w-full max-w-4xl max-h-[95vh] flex flex-col\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-shrink-0 p-6 border-b border-gray-200\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-2 bg-blue-100 rounded-lg\",children:/*#__PURE__*/_jsx(Building2,{className:\"h-6 w-6 text-blue-600\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-900\",children:isEditing?'Editar Banco':'Adicionar Novo Banco'}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mt-1\",children:newBankName||'Nome do banco'}),Object.keys(errors).length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-1 mt-1\",children:[/*#__PURE__*/_jsx(AlertCircle,{className:\"h-4 w-4 text-red-500\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs text-red-600 font-medium\",children:[Object.keys(errors).length,\" erro(s) no formul\\xE1rio\"]})]})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:onCancel,className:\"p-3 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-xl transition-colors duration-200\",\"aria-label\":\"Fechar\",children:/*#__PURE__*/_jsx(X,{className:\"h-6 w-6\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center space-x-2\",children:steps.map((step,index)=>{// Verificar se este passo tem erros\nconst stepHasErrors=Object.keys(errors).some(field=>getFieldStep(field)===step.id);return/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveStep(step.id),className:`flex items-center justify-center w-10 h-10 rounded-full transition-all duration-200 relative ${activeStep===step.id?'bg-blue-600 text-white shadow-lg':activeStep>step.id?'bg-green-500 text-white':'bg-gray-200 text-gray-500 hover:bg-gray-300'} ${stepHasErrors?'ring-2 ring-red-500 ring-offset-2':''}`,children:[activeStep>step.id?/*#__PURE__*/_jsx(CheckCircle,{className:\"h-5 w-5\"}):/*#__PURE__*/_jsx(step.icon,{className:\"h-5 w-5\"}),stepHasErrors&&/*#__PURE__*/_jsx(\"div\",{className:\"absolute -top-1 -right-1 w-4 h-4 bg-red-500 rounded-full flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-white font-bold\",children:Object.keys(errors).filter(field=>getFieldStep(field)===step.id).length})})]}),index<steps.length-1&&/*#__PURE__*/_jsx(\"div\",{className:`w-12 h-0.5 mx-2 rounded-full ${activeStep>step.id?'bg-green-400':'bg-gray-300'}`})]},step.id);})})}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-3 text-center\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-gray-700\",children:steps[activeStep-1].title})})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 overflow-y-auto p-6 pb-4\",children:/*#__PURE__*/_jsx(\"form\",{onSubmit:handleSubmit,className:\"space-y-6\",children:renderStepContent()})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0 p-4 border-t border-gray-200 bg-gray-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col sm:flex-row justify-between items-center space-y-4 sm:space-y-0 sm:space-x-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center space-x-2 text-sm text-gray-600\",children:/*#__PURE__*/_jsxs(\"span\",{children:[\"Passo \",activeStep,\" de \",steps.length]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col sm:flex-row space-y-3 sm:space-y-0 sm:space-x-3 w-full sm:w-auto\",children:[!isEditing&&/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:onCancel,className:\"btn-secondary w-full sm:w-auto flex items-center justify-center space-x-2\",disabled:isSubmitting,children:[/*#__PURE__*/_jsx(X,{className:\"h-4 w-4\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Cancelar\"})]}),activeStep>1&&/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:()=>setActiveStep(activeStep-1),className:\"btn-secondary w-full sm:w-auto flex items-center justify-center space-x-2\",children:[/*#__PURE__*/_jsx(ChevronLeft,{className:\"h-4 w-4\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Anterior\"})]}),activeStep<steps.length?/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:()=>setActiveStep(activeStep+1),className:\"btn-primary w-full sm:w-auto flex items-center justify-center space-x-2\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Pr\\xF3ximo\"}),/*#__PURE__*/_jsx(ChevronRight,{className:\"h-4 w-4\"})]}):/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-success w-full sm:w-auto flex items-center justify-center space-x-2\",disabled:isSubmitting,onClick:()=>{// Validar o formulário antes de submeter\nif(!validateForm()){// Se há erros, o usuário será redirecionado para o passo com erro\n// e os erros serão exibidos no passo 4\nreturn;}handleSubmit({preventDefault:()=>{}});},children:isSubmitting?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-4 w-4 border-b-2 border-white\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Guardando...\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Save,{className:\"h-4 w-4\"}),/*#__PURE__*/_jsx(\"span\",{children:isEditing?'Atualizar Banco':'Adicionar Banco'})]})})]})]})})]})});};","map":{"version":3,"names":["AlertCircle","Building2","Calculator","CheckCircle","ChevronLeft","ChevronRight","CreditCard","Euro","Save","TrendingUp","X","React","useEffect","useState","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","BankForm","_ref","bankName","data","onSave","onCancel","isEditing","formData","setFormData","newBankName","setNewBankName","errors","setErrors","isSubmitting","setIsSubmitting","activeStep","setActiveStep","document","body","classList","add","remove","validateForm","newErrors","trim","validateNumericField","field","fieldName","minValue","arguments","length","undefined","allowZero","value","numValue","parseFloat","isNaN","devolucao_spread","anosDevolucao","anos_devolucao_spread","tempoEmprestimo","tempo_emprestimo","Object","keys","handleSubmit","e","preventDefault","errorFields","firstErrorField","stepWithError","getFieldStep","processedData","valor_emprestimo","taxa_fixa","periodo_fixa","euribor","spread","seguro_vida","seguro_multiriscos","manutencao_conta","premios_entrada","comissoes_iniciais","outros","handleInputChange","prev","handleNumberInputChange","test","formatCurrency","Intl","NumberFormat","style","currency","format","formatPercentage","toFixed","calcularPrestacao","capital","taxaAnual","nMeses","taxaMensal","Math","pow","calcularCapitalRestante","capitalInicial","prestacao","getNumericValue","capitalRestante","mes","juros","amortizacao","max","obterPrestacaoMapaDivida","gerarMapaDivida","require","numericData","debtMap","entry","find","Mês","parsed","getFieldName","fieldNames","fieldToStep","totalMonthlyCosts","steps","id","title","icon","color","renderStepContent","_formData$taxa_fixa","_formData$periodo_fix","className","children","type","onChange","target","placeholder","String","checked","htmlFor","min","entries","map","_ref2","error","onClick","amortizacoes","reduce","total","a","valor","step","index","stepHasErrors","some","filter","onSubmit","disabled"],"sources":["/home/julio/github/jmbcs/comparador_credito/src/components/BankForm.tsx"],"sourcesContent":["import { AlertCircle, Building2, Calculator, CheckCircle, ChevronLeft, ChevronRight, CreditCard, Euro, Save, TrendingUp, X } from 'lucide-react';\nimport React, { useEffect, useState } from 'react';\nimport { BankData } from '../types';\n\ninterface BankFormProps {\n    bankName: string;\n    data: BankData;\n    onSave: (bankName: string, data: BankData) => void;\n    onCancel: () => void;\n    isEditing: boolean;\n}\n\nexport const BankForm: React.FC<BankFormProps> = ({ bankName, data, onSave, onCancel, isEditing }) => {\n    const [formData, setFormData] = useState<BankData>(data);\n    const [newBankName, setNewBankName] = useState(isEditing ? bankName : '');\n    const [errors, setErrors] = useState<Record<string, string>>({});\n    const [isSubmitting, setIsSubmitting] = useState(false);\n    const [activeStep, setActiveStep] = useState(1);\n\n    // No useEffect needed - the component will be recreated with the key prop\n\n    // Bloquear scroll do body quando o modal estiver aberto\n    useEffect(() => {\n        document.body.classList.add('scroll-locked');\n\n        return () => {\n            document.body.classList.remove('scroll-locked');\n        };\n    }, []);\n\n    const validateForm = (): boolean => {\n        const newErrors: Record<string, string> = {};\n\n        if (!newBankName.trim()) {\n            newErrors.bankName = 'Nome do banco é obrigatório';\n        }\n\n        // Função auxiliar para validar campos numéricos\n        const validateNumericField = (field: keyof BankData, fieldName: string, minValue: number = 0, allowZero: boolean = false) => {\n            const value = formData[field];\n            if (typeof value === 'string') {\n                if (value === '' || value === '.' || value === '0') {\n                    newErrors[field] = `${fieldName} é obrigatório`;\n                } else {\n                    const numValue = parseFloat(value);\n                    if (isNaN(numValue)) {\n                        newErrors[field] = `${fieldName} deve ser um número válido`;\n                    } else if (!allowZero && numValue <= minValue) {\n                        newErrors[field] = `${fieldName} deve ser maior que ${minValue}`;\n                    } else if (allowZero && numValue < minValue) {\n                        newErrors[field] = `${fieldName} não pode ser menor que ${minValue}`;\n                    }\n                }\n            } else if (typeof value === 'number') {\n                if (!allowZero && value <= minValue) {\n                    newErrors[field] = `${fieldName} deve ser maior que ${minValue}`;\n                } else if (allowZero && value < minValue) {\n                    newErrors[field] = `${fieldName} não pode ser menor que ${minValue}`;\n                }\n            }\n        };\n\n        validateNumericField('valor_emprestimo', 'Valor do empréstimo', 0, false);\n        validateNumericField('tempo_emprestimo', 'Tempo do empréstimo', 0, false);\n        // Removida validação obrigatória para taxa_fixa e periodo_fixa\n        validateNumericField('seguro_vida', 'Seguro de vida', 0, true);\n        validateNumericField('seguro_multiriscos', 'Seguro multiriscos', 0, true);\n        validateNumericField('manutencao_conta', 'Manutenção de conta', 0, true);\n        validateNumericField('premios_entrada', 'Prémios de entrada', 0, true);\n        validateNumericField('comissoes_iniciais', 'Comissões iniciais', 0, true);\n        validateNumericField('outros', 'Outros custos', 0, true);\n\n        // Validação específica para anos de devolução do spread\n        if (formData.devolucao_spread) {\n            const anosDevolucao = typeof formData.anos_devolucao_spread === 'string' ?\n                parseFloat(formData.anos_devolucao_spread) : formData.anos_devolucao_spread;\n            const tempoEmprestimo = typeof formData.tempo_emprestimo === 'string' ?\n                parseFloat(formData.tempo_emprestimo) : formData.tempo_emprestimo;\n\n            if (isNaN(anosDevolucao) || anosDevolucao <= 0) {\n                newErrors.anos_devolucao_spread = 'Anos de devolução do spread deve ser maior que 0';\n            } else if (anosDevolucao > tempoEmprestimo) {\n                newErrors.anos_devolucao_spread = 'Anos de devolução do spread não pode ser maior que o tempo do empréstimo';\n            }\n        }\n\n        setErrors(newErrors);\n        return Object.keys(newErrors).length === 0;\n    };\n\n    const handleSubmit = async (e: React.FormEvent) => {\n        e.preventDefault();\n\n        if (!validateForm()) {\n            // Se há erros, ir para o primeiro passo que contém erros\n            const errorFields = Object.keys(errors);\n            if (errorFields.length > 0) {\n                // Encontrar o primeiro passo com erro\n                const firstErrorField = errorFields[0];\n                const stepWithError = getFieldStep(firstErrorField);\n                setActiveStep(stepWithError);\n            }\n            return;\n        }\n\n        setIsSubmitting(true);\n\n        try {\n            // Converter todos os valores string para números antes de salvar\n            const processedData: BankData = {\n                ...formData,\n                valor_emprestimo: typeof formData.valor_emprestimo === 'string' ? parseFloat(formData.valor_emprestimo) || 0 : formData.valor_emprestimo,\n                tempo_emprestimo: typeof formData.tempo_emprestimo === 'string' ? parseFloat(formData.tempo_emprestimo) || 0 : formData.tempo_emprestimo,\n                taxa_fixa: typeof formData.taxa_fixa === 'string' ? parseFloat(formData.taxa_fixa) || 0 : formData.taxa_fixa,\n                periodo_fixa: typeof formData.periodo_fixa === 'string' ? parseFloat(formData.periodo_fixa) || 0 : formData.periodo_fixa,\n                euribor: typeof formData.euribor === 'string' ? parseFloat(formData.euribor) || 0 : formData.euribor,\n                spread: typeof formData.spread === 'string' ? parseFloat(formData.spread) || 0 : formData.spread,\n                seguro_vida: typeof formData.seguro_vida === 'string' ? parseFloat(formData.seguro_vida) || 0 : formData.seguro_vida,\n                seguro_multiriscos: typeof formData.seguro_multiriscos === 'string' ? parseFloat(formData.seguro_multiriscos) || 0 : formData.seguro_multiriscos,\n                manutencao_conta: typeof formData.manutencao_conta === 'string' ? parseFloat(formData.manutencao_conta) || 0 : formData.manutencao_conta,\n                premios_entrada: typeof formData.premios_entrada === 'string' ? parseFloat(formData.premios_entrada) || 0 : formData.premios_entrada,\n                comissoes_iniciais: typeof formData.comissoes_iniciais === 'string' ? parseFloat(formData.comissoes_iniciais) || 0 : formData.comissoes_iniciais,\n                outros: typeof formData.outros === 'string' ? parseFloat(formData.outros) || 0 : formData.outros,\n                anos_devolucao_spread: typeof formData.anos_devolucao_spread === 'string' ? parseFloat(formData.anos_devolucao_spread) || 0 : formData.anos_devolucao_spread,\n            };\n\n            await onSave(newBankName, processedData);\n        } finally {\n            setIsSubmitting(false);\n        }\n    };\n\n    const handleInputChange = (field: keyof BankData, value: number | boolean | any) => {\n        setFormData(prev => ({ ...prev, [field]: value }));\n        if (errors[field]) {\n            setErrors(prev => ({ ...prev, [field]: '' }));\n        }\n    };\n\n    const handleNumberInputChange = (field: keyof BankData, value: string) => {\n        // Permitir strings vazias e qualquer padrão numérico válido durante a digitação\n        if (value === '' ||\n            value === '.' ||\n            value === '0' ||\n            /^0\\.$/.test(value) ||\n            /^0\\.\\d*$/.test(value) ||\n            /^\\d+\\.?\\d*$/.test(value)) {\n            // Manter como string para permitir digitação contínua\n            setFormData(prev => ({ ...prev, [field]: value }));\n        } else {\n            // Verificar se é um número válido\n            const numValue = parseFloat(value);\n            if (!isNaN(numValue)) {\n                handleInputChange(field, numValue);\n            } else {\n                // Se não for um número válido, manter o valor anterior\n                setFormData(prev => ({ ...prev, [field]: prev[field] }));\n            }\n        }\n        if (errors[field]) {\n            setErrors(prev => ({ ...prev, [field]: '' }));\n        }\n    };\n\n    const formatCurrency = (value: number) => {\n        return new Intl.NumberFormat('pt-PT', {\n            style: 'currency',\n            currency: 'EUR'\n        }).format(value);\n    };\n\n    const formatPercentage = (value: number) => {\n        return `${value.toFixed(3)}%`;\n    };\n\n    // Função para calcular prestação mensal\n    const calcularPrestacao = (capital: number, taxaAnual: number, nMeses: number): number => {\n        if (taxaAnual === 0 || nMeses === 0) return 0;\n        const taxaMensal = taxaAnual / 12 / 100;\n        return (capital * taxaMensal * Math.pow(1 + taxaMensal, nMeses)) / (Math.pow(1 + taxaMensal, nMeses) - 1);\n    };\n\n    // Função para calcular capital em dívida após período fixo\n    const calcularCapitalRestante = (capitalInicial: number, taxaAnual: number, nMeses: number): number => {\n        if (taxaAnual === 0 || nMeses === 0) return capitalInicial;\n\n        const taxaMensal = taxaAnual / 12 / 100;\n        const prestacao = calcularPrestacao(capitalInicial, taxaAnual, getNumericValue(formData.tempo_emprestimo) * 12);\n\n        // Calcular capital restante após nMeses de pagamentos\n        let capitalRestante = capitalInicial;\n        for (let mes = 1; mes <= nMeses; mes++) {\n            const juros = capitalRestante * taxaMensal;\n            const amortizacao = prestacao - juros;\n            capitalRestante = capitalRestante - amortizacao;\n        }\n\n        return Math.max(0, capitalRestante);\n    };\n\n    // Função para obter prestação usando mapa de dívida\n    const obterPrestacaoMapaDivida = (data: BankData, mes: number): number => {\n        const { gerarMapaDivida } = require('../utils/calculations');\n\n        // Converter dados para valores numéricos para os cálculos\n        const numericData: BankData = {\n            ...data,\n            valor_emprestimo: getNumericValue(data.valor_emprestimo),\n            tempo_emprestimo: getNumericValue(data.tempo_emprestimo),\n            taxa_fixa: getNumericValue(data.taxa_fixa),\n            periodo_fixa: getNumericValue(data.periodo_fixa),\n            euribor: getNumericValue(data.euribor),\n            spread: getNumericValue(data.spread),\n            seguro_vida: getNumericValue(data.seguro_vida),\n            seguro_multiriscos: getNumericValue(data.seguro_multiriscos),\n            manutencao_conta: getNumericValue(data.manutencao_conta),\n            premios_entrada: getNumericValue(data.premios_entrada),\n            comissoes_iniciais: getNumericValue(data.comissoes_iniciais),\n            outros: getNumericValue(data.outros),\n        };\n\n        const debtMap = gerarMapaDivida(numericData, 'temp');\n        const entry = debtMap.find((entry: any) => entry.Mês === mes);\n        return entry ? entry[\"Prestação (€)\"] : 0;\n    };\n\n    // Função auxiliar para obter valores numéricos de forma segura\n    const getNumericValue = (value: any): number => {\n        if (typeof value === 'number') return value;\n        if (typeof value === 'string') {\n            const parsed = parseFloat(value);\n            return isNaN(parsed) ? 0 : parsed;\n        }\n        return 0;\n    };\n\n    // Função para obter o nome do campo em português\n    const getFieldName = (field: string): string => {\n        const fieldNames: Record<string, string> = {\n            bankName: 'Nome do Banco',\n            valor_emprestimo: 'Valor do Empréstimo',\n            tempo_emprestimo: 'Tempo do Empréstimo',\n            taxa_fixa: 'Taxa Fixa',\n            periodo_fixa: 'Período Fixo',\n            euribor: 'Euribor',\n            spread: 'Spread',\n            seguro_vida: 'Seguro de Vida',\n            seguro_multiriscos: 'Seguro Multiriscos',\n            manutencao_conta: 'Manutenção de Conta',\n            outros: 'Outros Custos',\n            premios_entrada: 'Prémios de Entrada',\n            comissoes_iniciais: 'Comissões Iniciais',\n            anos_devolucao_spread: 'Anos de Devolução do Spread'\n        };\n        return fieldNames[field] || field;\n    };\n\n    // Função para obter o passo onde o campo está localizado\n    const getFieldStep = (field: string): number => {\n        const fieldToStep: Record<string, number> = {\n            bankName: 1,\n            valor_emprestimo: 1,\n            tempo_emprestimo: 1,\n            taxa_fixa: 2,\n            periodo_fixa: 2,\n            euribor: 2,\n            spread: 2,\n            seguro_vida: 2,\n            seguro_multiriscos: 2,\n            manutencao_conta: 2,\n            outros: 2,\n            anos_devolucao_spread: 2,\n            premios_entrada: 3,\n            comissoes_iniciais: 3,\n        };\n        return fieldToStep[field] || 1;\n    };\n\n    const totalMonthlyCosts = getNumericValue(formData.seguro_vida) +\n        getNumericValue(formData.seguro_multiriscos) +\n        getNumericValue(formData.manutencao_conta) +\n        getNumericValue(formData.outros);\n\n    const steps = [\n        { id: 1, title: 'Informações Básicas', icon: Building2, color: 'blue' },\n        { id: 2, title: 'Taxas e Custos', icon: Calculator, color: 'green' },\n        { id: 3, title: 'Outflow Inicial', icon: CreditCard, color: 'purple' },\n        { id: 4, title: 'Resumo', icon: CheckCircle, color: 'emerald' }\n    ];\n\n    const renderStepContent = () => {\n        switch (activeStep) {\n            case 1:\n                return (\n                    <div className=\"space-y-6\">\n                        <div className=\"bg-white rounded-xl border border-gray-200 p-6\">\n                            <div className=\"flex items-center space-x-3 mb-6\">\n                                <div className=\"p-2 bg-blue-100 rounded-lg\">\n                                    <Building2 className=\"h-5 w-5 text-blue-600\" />\n                                </div>\n                                <h3 className=\"text-lg font-semibold text-gray-900\">Informações Básicas</h3>\n                            </div>\n\n                            <div className=\"space-y-5\">\n                                <div className=\"form-group\">\n                                    <label className=\"form-label\">\n                                        Nome do Banco *\n                                    </label>\n                                    <input\n                                        type=\"text\"\n                                        value={newBankName}\n                                        onChange={(e) => {\n                                            setNewBankName(e.target.value);\n                                            if (errors.bankName) setErrors(prev => ({ ...prev, bankName: '' }));\n                                        }}\n                                        className={`input ${errors.bankName ? 'input-error' : ''}`}\n                                        placeholder=\"Ex: Banco de Portugal\"\n                                    />\n                                    {errors.bankName && (\n                                        <p className=\"form-error\">\n                                            <AlertCircle className=\"h-4 w-4\" />\n                                            <span>{errors.bankName}</span>\n                                        </p>\n                                    )}\n                                </div>\n\n                                <div className=\"form-group\">\n                                    <label className=\"form-label\">\n                                        Valor do Empréstimo (€) *\n                                    </label>\n                                    <input\n                                        type=\"text\"\n                                        value={typeof formData.valor_emprestimo === 'string' ? formData.valor_emprestimo : (formData.valor_emprestimo || '')}\n                                        onChange={(e) => handleNumberInputChange('valor_emprestimo', e.target.value)}\n                                        className={`input ${errors.valor_emprestimo ? 'input-error' : ''}`}\n                                        placeholder=\"Ex: 200000\"\n                                    />\n                                    {errors.valor_emprestimo && (\n                                        <p className=\"form-error\">\n                                            <AlertCircle className=\"h-4 w-4\" />\n                                            <span>{errors.valor_emprestimo}</span>\n                                        </p>\n                                    )}\n                                </div>\n\n                                <div className=\"form-group\">\n                                    <label className=\"form-label\">\n                                        Prazo (anos) *\n                                    </label>\n                                    <input\n                                        type=\"text\"\n                                        value={typeof formData.tempo_emprestimo === 'string' ? formData.tempo_emprestimo : (formData.tempo_emprestimo || '')}\n                                        onChange={(e) => handleNumberInputChange('tempo_emprestimo', e.target.value)}\n                                        className={`input ${errors.tempo_emprestimo ? 'input-error' : ''}`}\n                                        placeholder=\"Ex: 30\"\n                                    />\n                                    {errors.tempo_emprestimo && (\n                                        <p className=\"form-error\">\n                                            <AlertCircle className=\"h-4 w-4\" />\n                                            <span>{errors.tempo_emprestimo}</span>\n                                        </p>\n                                    )}\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                );\n\n            case 2:\n                return (\n                    <div className=\"space-y-6\">\n                        <div className=\"bg-white rounded-xl border border-gray-200 p-6\">\n                            <div className=\"flex items-center space-x-3 mb-6\">\n                                <div className=\"p-2 bg-green-100 rounded-lg\">\n                                    <Calculator className=\"h-5 w-5 text-green-600\" />\n                                </div>\n                                <h3 className=\"text-lg font-semibold text-gray-900\">Taxas e Custos Mensais</h3>\n                            </div>\n\n                            <div className=\"space-y-6\">\n                                {/* Taxas */}\n                                <div className=\"space-y-4\">\n                                    <h4 className=\"font-semibold text-gray-800 text-base\">Taxas</h4>\n\n                                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                                        <div className=\"form-group\">\n                                            <label className=\"form-label\">\n                                                Taxa Fixa (%)\n                                            </label>\n                                            <input\n                                                type=\"text\"\n                                                value={String(formData.taxa_fixa) === '0' ? '0' : (formData.taxa_fixa ?? '')}\n                                                onChange={(e) => handleNumberInputChange('taxa_fixa', e.target.value)}\n                                                className={`input ${errors.taxa_fixa ? 'input-error' : ''}`}\n                                                placeholder=\"Ex: 3.5\"\n                                            />\n                                            {errors.taxa_fixa && (\n                                                <p className=\"form-error\">\n                                                    <AlertCircle className=\"h-4 w-4\" />\n                                                    <span>{errors.taxa_fixa}</span>\n                                                </p>\n                                            )}\n                                        </div>\n\n                                        <div className=\"form-group\">\n                                            <label className=\"form-label\">\n                                                Período Fixo (anos)\n                                            </label>\n                                            <input\n                                                type=\"text\"\n                                                value={String(formData.periodo_fixa) === '0' ? '0' : (formData.periodo_fixa ?? '')}\n                                                onChange={(e) => handleNumberInputChange('periodo_fixa', e.target.value)}\n                                                className=\"input\"\n                                                placeholder=\"Ex: 2\"\n                                            />\n                                        </div>\n\n                                        <div className=\"form-group\">\n                                            <label className=\"form-label\">\n                                                Euribor (%)\n                                            </label>\n                                            <input\n                                                type=\"text\"\n                                                value={typeof formData.euribor === 'string' ? formData.euribor : (formData.euribor || '')}\n                                                onChange={(e) => handleNumberInputChange('euribor', e.target.value)}\n                                                className=\"input\"\n                                                placeholder=\"Ex: 2.081\"\n                                            />\n                                        </div>\n\n                                        <div className=\"form-group\">\n                                            <label className=\"form-label\">\n                                                Spread (%)\n                                            </label>\n                                            <input\n                                                type=\"text\"\n                                                value={typeof formData.spread === 'string' ? formData.spread : (formData.spread || '')}\n                                                onChange={(e) => handleNumberInputChange('spread', e.target.value)}\n                                                className={`input ${errors.spread ? 'input-error' : ''}`}\n                                                placeholder=\"Ex: 0.5\"\n                                            />\n                                        </div>\n                                    </div>\n                                </div>\n\n                                {/* Custos Mensais */}\n                                <div className=\"space-y-4\">\n                                    <h4 className=\"font-semibold text-gray-800 text-base\">Custos Mensais</h4>\n\n                                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                                        <div className=\"form-group\">\n                                            <label className=\"form-label\">\n                                                Seguro de Vida (€/mês)\n                                            </label>\n                                            <input\n                                                type=\"text\"\n                                                value={typeof formData.seguro_vida === 'string' ? formData.seguro_vida : (formData.seguro_vida || '')}\n                                                onChange={(e) => handleNumberInputChange('seguro_vida', e.target.value)}\n                                                className={`input ${errors.seguro_vida ? 'input-error' : ''}`}\n                                                placeholder=\"Ex: 5.00\"\n                                            />\n                                            {errors.seguro_vida && (\n                                                <p className=\"form-error\">\n                                                    <AlertCircle className=\"h-4 w-4\" />\n                                                    <span>{errors.seguro_vida}</span>\n                                                </p>\n                                            )}\n                                        </div>\n\n                                        <div className=\"form-group\">\n                                            <label className=\"form-label\">\n                                                Seguro Multirriscos (€/mês)\n                                            </label>\n                                            <input\n                                                type=\"text\"\n                                                value={typeof formData.seguro_multiriscos === 'string' ? formData.seguro_multiriscos : (formData.seguro_multiriscos || '')}\n                                                onChange={(e) => handleNumberInputChange('seguro_multiriscos', e.target.value)}\n                                                className={`input ${errors.seguro_multiriscos ? 'input-error' : ''}`}\n                                                placeholder=\"Ex: 3.50\"\n                                            />\n                                            {errors.seguro_multiriscos && (\n                                                <p className=\"form-error\">\n                                                    <AlertCircle className=\"h-4 w-4\" />\n                                                    <span>{errors.seguro_multiriscos}</span>\n                                                </p>\n                                            )}\n                                        </div>\n\n                                        <div className=\"form-group\">\n                                            <label className=\"form-label\">\n                                                Manutenção de Conta (€/mês)\n                                            </label>\n                                            <input\n                                                type=\"text\"\n                                                value={typeof formData.manutencao_conta === 'string' ? formData.manutencao_conta : (formData.manutencao_conta || '')}\n                                                onChange={(e) => handleNumberInputChange('manutencao_conta', e.target.value)}\n                                                className={`input ${errors.manutencao_conta ? 'input-error' : ''}`}\n                                                placeholder=\"Ex: 10.00\"\n                                            />\n                                            {errors.manutencao_conta && (\n                                                <p className=\"form-error\">\n                                                    <AlertCircle className=\"h-4 w-4\" />\n                                                    <span>{errors.manutencao_conta}</span>\n                                                </p>\n                                            )}\n                                        </div>\n\n                                        <div className=\"form-group\">\n                                            <label className=\"form-label\">\n                                                Outros Custos (€/mês)\n                                            </label>\n                                            <input\n                                                type=\"text\"\n                                                value={typeof formData.outros === 'string' ? formData.outros : (formData.outros || '')}\n                                                onChange={(e) => handleNumberInputChange('outros', e.target.value)}\n                                                className={`input ${errors.outros ? 'input-error' : ''}`}\n                                                placeholder=\"Ex: 5.00\"\n                                            />\n                                            {errors.outros && (\n                                                <p className=\"form-error\">\n                                                    <AlertCircle className=\"h-4 w-4\" />\n                                                    <span>{errors.outros}</span>\n                                                </p>\n                                            )}\n                                        </div>\n                                    </div>\n\n                                    <div className=\"space-y-4\">\n                                        <div className=\"flex items-center space-x-3 p-4 bg-gray-50 rounded-lg border border-gray-200\">\n                                            <input\n                                                type=\"checkbox\"\n                                                id=\"devolucao_spread\"\n                                                checked={formData.devolucao_spread}\n                                                onChange={(e) => handleInputChange('devolucao_spread', e.target.checked)}\n                                                className=\"rounded border-gray-300 text-green-600 focus:ring-green-500 h-5 w-5\"\n                                            />\n                                            <label htmlFor=\"devolucao_spread\" className=\"text-sm font-medium text-gray-700\">\n                                                Devolução do Spread\n                                            </label>\n                                        </div>\n\n                                        {formData.devolucao_spread && (\n                                            <div className=\"form-group\">\n                                                <label className=\"form-label\">\n                                                    Anos de Duração da Devolução do Spread\n                                                </label>\n                                                <input\n                                                    type=\"number\"\n                                                    min=\"0\"\n                                                    max={getNumericValue(formData.tempo_emprestimo)}\n                                                    value={typeof formData.anos_devolucao_spread === 'string' ? formData.anos_devolucao_spread : (formData.anos_devolucao_spread || '')}\n                                                    onChange={(e) => handleNumberInputChange('anos_devolucao_spread', e.target.value)}\n                                                    className={`input ${errors.anos_devolucao_spread ? 'input-error' : ''}`}\n                                                    placeholder=\"Ex: 2\"\n                                                />\n                                                {errors.anos_devolucao_spread && (\n                                                    <p className=\"form-error\">\n                                                        <AlertCircle className=\"h-4 w-4\" />\n                                                        <span>{errors.anos_devolucao_spread}</span>\n                                                    </p>\n                                                )}\n                                                <p className=\"text-xs text-gray-500 mt-1\">\n                                                    Define por quantos anos a devolução do spread será aplicada\n                                                </p>\n                                            </div>\n                                        )}\n                                    </div>\n                                </div>\n\n                                {/* Resumo dos Custos Mensais */}\n                                <div className=\"p-4 bg-green-50 rounded-lg border border-green-200\">\n                                    <div className=\"flex justify-between items-center\">\n                                        <span className=\"text-sm font-medium text-gray-700\">Total Custos Mensais:</span>\n                                        <span className=\"font-semibold text-lg text-green-700\">{formatCurrency(totalMonthlyCosts)}</span>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                );\n\n            case 3:\n                return (\n                    <div className=\"space-y-6\">\n                        <div className=\"bg-white rounded-xl border border-gray-200 p-6\">\n                            <div className=\"flex items-center space-x-3 mb-6\">\n                                <div className=\"p-2 bg-purple-100 rounded-lg\">\n                                    <CreditCard className=\"h-5 w-5 text-purple-600\" />\n                                </div>\n                                <h3 className=\"text-lg font-semibold text-gray-900\">Outflow Inicial</h3>\n                            </div>\n\n                            <div className=\"space-y-5\">\n                                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                                    <div className=\"form-group\">\n                                        <label className=\"form-label\">\n                                            Prémios de Entrada (€)\n                                        </label>\n                                        <input\n                                            type=\"text\"\n                                            value={typeof formData.premios_entrada === 'string' ? formData.premios_entrada : (formData.premios_entrada || '')}\n                                            onChange={(e) => handleNumberInputChange('premios_entrada', e.target.value)}\n                                            className={`input ${errors.premios_entrada ? 'input-error' : ''}`}\n                                            placeholder=\"Ex: 200.00\"\n                                        />\n                                        {errors.premios_entrada && (\n                                            <p className=\"form-error\">\n                                                <AlertCircle className=\"h-4 w-4\" />\n                                                <span>{errors.premios_entrada}</span>\n                                            </p>\n                                        )}\n                                    </div>\n\n                                    <div className=\"form-group\">\n                                        <label className=\"form-label\">\n                                            Comissões Iniciais (€)\n                                        </label>\n                                        <input\n                                            type=\"text\"\n                                            value={typeof formData.comissoes_iniciais === 'string' ? formData.comissoes_iniciais : (formData.comissoes_iniciais || '')}\n                                            onChange={(e) => handleNumberInputChange('comissoes_iniciais', e.target.value)}\n                                            className={`input ${errors.comissoes_iniciais ? 'input-error' : ''}`}\n                                            placeholder=\"Ex: 300.00\"\n                                        />\n                                        {errors.comissoes_iniciais && (\n                                            <p className=\"form-error\">\n                                                <AlertCircle className=\"h-4 w-4\" />\n                                                <span>{errors.comissoes_iniciais}</span>\n                                            </p>\n                                        )}\n                                    </div>\n                                </div>\n\n                                {/* Resumo dos Custos Iniciais */}\n                                <div className=\"space-y-3\">\n                                    <div className=\"flex justify-between items-center p-4 bg-green-50 rounded-lg border border-green-200\">\n                                        <span className=\"text-sm font-medium text-gray-700\">Prémios de Entrada:</span>\n                                        <span className=\"font-semibold text-green-700\">+{formatCurrency(getNumericValue(formData.premios_entrada))}</span>\n                                    </div>\n                                    <div className=\"flex justify-between items-center p-4 bg-red-50 rounded-lg border border-red-200\">\n                                        <span className=\"text-sm font-medium text-gray-700\">Comissões Iniciais:</span>\n                                        <span className=\"font-semibold text-red-700\">-{formatCurrency(getNumericValue(formData.comissoes_iniciais))}</span>\n                                    </div>\n                                    <div className=\"flex justify-between items-center p-4 bg-blue-50 rounded-lg border border-blue-200\">\n                                        <span className=\"text-sm font-medium text-gray-700\">Saldo Inicial:</span>\n                                        <span className={`font-semibold text-lg ${getNumericValue(formData.premios_entrada) >= getNumericValue(formData.comissoes_iniciais) ? 'text-green-700' : 'text-red-700'}`}>\n                                            {getNumericValue(formData.premios_entrada) >= getNumericValue(formData.comissoes_iniciais) ? '+' : ''}\n                                            {formatCurrency(getNumericValue(formData.premios_entrada) - getNumericValue(formData.comissoes_iniciais))}\n                                        </span>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                );\n\n            case 4:\n                return (\n                    <div className=\"space-y-6\">\n                        {/* Hidden input to ensure form submission works */}\n                        <input type=\"hidden\" value=\"summary\" />\n                        <div className=\"bg-white rounded-xl border border-gray-200 p-6\">\n                            <div className=\"flex items-center space-x-3 mb-6\">\n                                <div className=\"p-2 bg-emerald-100 rounded-lg\">\n                                    <CheckCircle className=\"h-5 w-5 text-emerald-600\" />\n                                </div>\n                                <h3 className=\"text-lg font-semibold text-gray-900\">Resumo da Proposta</h3>\n                            </div>\n\n                            {/* Seção de Erros do Formulário - MOVIDA PARA O TOPO */}\n                            {Object.keys(errors).length > 0 && (\n                                <div className=\"bg-red-50 p-4 rounded-lg border border-red-200 mb-6\">\n                                    <h4 className=\"font-semibold text-red-900 mb-3 flex items-center space-x-2\">\n                                        <AlertCircle className=\"h-4 w-4 text-red-600\" />\n                                        <span>Erros no Formulário</span>\n                                    </h4>\n                                    <div className=\"space-y-2\">\n                                        <p className=\"text-sm text-red-700 mb-3\">\n                                            Por favor, corrija os seguintes erros antes de guardar o banco:\n                                        </p>\n                                        <div className=\"space-y-2\">\n                                            {Object.entries(errors).map(([field, error]) => (\n                                                <div key={field} className=\"flex items-start space-x-2 p-2 bg-red-100 rounded-lg\">\n                                                    <AlertCircle className=\"h-4 w-4 text-red-600 mt-0.5 flex-shrink-0\" />\n                                                    <div className=\"flex-1\">\n                                                        <div className=\"flex items-center space-x-2\">\n                                                            <span className=\"font-medium text-red-800\">\n                                                                {getFieldName(field)}:\n                                                            </span>\n                                                            <span className=\"text-sm text-red-700\">\n                                                                {error}\n                                                            </span>\n                                                        </div>\n                                                        <button\n                                                            type=\"button\"\n                                                            onClick={() => setActiveStep(getFieldStep(field))}\n                                                            className=\"text-xs text-red-600 hover:text-red-800 underline mt-1\"\n                                                        >\n                                                            Ir para o Passo {getFieldStep(field)} para corrigir\n                                                        </button>\n                                                    </div>\n                                                </div>\n                                            ))}\n                                        </div>\n                                    </div>\n                                </div>\n                            )}\n\n                            {/* Informações Principais */}\n                            <div className=\"data-grid mb-6\">\n                                <div className=\"data-item\">\n                                    <div className=\"data-label\">Valor do Empréstimo</div>\n                                    <div className=\"data-value\">{formatCurrency(getNumericValue(formData.valor_emprestimo))}</div>\n                                </div>\n\n                                <div className=\"data-item\">\n                                    <div className=\"data-label\">Prazo Total</div>\n                                    <div className=\"data-value\">{getNumericValue(formData.tempo_emprestimo)} anos</div>\n                                    <div className=\"text-xs text-gray-500\">({getNumericValue(formData.tempo_emprestimo) * 12} meses)</div>\n                                </div>\n\n                                <div className=\"data-item\">\n                                    <div className=\"data-label\">Taxa Fixa</div>\n                                    <div className=\"data-value\">{formatPercentage(getNumericValue(formData.taxa_fixa))}</div>\n                                    <div className=\"text-xs text-gray-500\">Período: {getNumericValue(formData.periodo_fixa)} anos</div>\n                                </div>\n\n                                <div className=\"data-item\">\n                                    <div className=\"data-label\">Custos Mensais</div>\n                                    <div className=\"data-value\">{formatCurrency(totalMonthlyCosts)}</div>\n                                </div>\n                            </div>\n\n                            {/* Taxas e Spread */}\n                            <div className=\"data-grid mb-6\">\n                                <div className=\"data-item\">\n                                    <div className=\"data-label\">Euribor</div>\n                                    <div className=\"data-value\">{formatPercentage(getNumericValue(formData.euribor))}</div>\n                                </div>\n\n                                <div className=\"data-item\">\n                                    <div className=\"data-label\">Spread</div>\n                                    <div className=\"data-value\">{formatPercentage(getNumericValue(formData.spread))}</div>\n                                </div>\n\n                                <div className=\"data-item\">\n                                    <div className=\"data-label\">Devolução Spread</div>\n                                    <div className=\"data-value\">\n                                        {formData.devolucao_spread ? `Sim (${getNumericValue(formData.anos_devolucao_spread)} anos)` : 'Não'}\n                                    </div>\n                                </div>\n                            </div>\n\n                            {/* Prestações por Período */}\n                            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6\">\n                                {/* Prestação Período Fixo */}\n                                <div className=\"data-card\">\n                                    <h4 className=\"font-semibold text-gray-800 mb-3 flex items-center space-x-2\">\n                                        <Calculator className=\"h-4 w-4 text-blue-600\" />\n                                        <span>Prestação Período Fixo</span>\n                                    </h4>\n                                    <div className=\"space-y-2\">\n                                        <div className=\"flex justify-between\">\n                                            <span className=\"text-sm text-gray-600\">Taxa Aplicada:</span>\n                                            <span className=\"font-medium text-blue-700\">{formatPercentage(getNumericValue(formData.taxa_fixa))}</span>\n                                        </div>\n                                        <div className=\"flex justify-between\">\n                                            <span className=\"text-sm text-gray-600\">Duração:</span>\n                                            <span className=\"font-medium\">{getNumericValue(formData.periodo_fixa)} anos</span>\n                                        </div>\n                                        <div className=\"flex justify-between\">\n                                            <span className=\"text-sm text-gray-600\">Prestação Mensal:</span>\n                                            <span className=\"font-semibold text-lg text-blue-700\">\n                                                {formatCurrency(obterPrestacaoMapaDivida(formData, 1))}\n                                            </span>\n                                        </div>\n                                        <div className=\"flex justify-between\">\n                                            <span className=\"text-sm text-gray-600\">Total com Custos:</span>\n                                            <span className=\"font-semibold text-lg text-blue-700\">\n                                                {formatCurrency(obterPrestacaoMapaDivida(formData, 1) + totalMonthlyCosts)}\n                                            </span>\n                                        </div>\n                                        <div className=\"flex justify-between\">\n                                            <span className=\"text-sm text-gray-600\">Capital em Dívida (após {getNumericValue(formData.periodo_fixa)} anos):</span>\n                                            <span className=\"font-medium text-blue-600\">\n                                                {formatCurrency(calcularCapitalRestante(getNumericValue(formData.valor_emprestimo), getNumericValue(formData.taxa_fixa), getNumericValue(formData.periodo_fixa) * 12))}\n                                            </span>\n                                        </div>\n                                    </div>\n                                </div>\n\n                                {/* Prestação Período Variável */}\n                                <div className=\"data-card\">\n                                    <h4 className=\"font-semibold text-gray-800 mb-3 flex items-center space-x-2\">\n                                        <TrendingUp className=\"h-4 w-4 text-purple-600\" />\n                                        <span>Prestação Período Variável</span>\n                                    </h4>\n                                    <div className=\"space-y-2\">\n                                        <div className=\"flex justify-between\">\n                                            <span className=\"text-sm text-gray-600\">Taxa Aplicada:</span>\n                                            <span className=\"font-medium text-purple-700\">{formatPercentage(getNumericValue(formData.euribor) + getNumericValue(formData.spread))}</span>\n                                        </div>\n                                        <div className=\"flex justify-between\">\n                                            <span className=\"text-sm text-gray-600\">Duração:</span>\n                                            <span className=\"font-medium\">\n                                                {getNumericValue(formData.periodo_fixa) >= getNumericValue(formData.tempo_emprestimo) ?\n                                                    'N/A (apenas período fixo)' :\n                                                    `${getNumericValue(formData.tempo_emprestimo) - getNumericValue(formData.periodo_fixa)} anos`\n                                                }\n                                            </span>\n                                        </div>\n                                        <div className=\"flex justify-between\">\n                                            <span className=\"text-sm text-gray-600\">Prestação Mensal:</span>\n                                            <span className=\"font-semibold text-lg text-purple-700\">\n                                                {getNumericValue(formData.periodo_fixa) >= getNumericValue(formData.tempo_emprestimo) ?\n                                                    'N/A (apenas período fixo)' :\n                                                    formatCurrency(obterPrestacaoMapaDivida(formData, getNumericValue(formData.periodo_fixa) * 12 + 1))\n                                                }\n                                            </span>\n                                        </div>\n                                        <div className=\"flex justify-between\">\n                                            <span className=\"text-sm text-gray-600\">Total com Custos:</span>\n                                            <span className=\"font-semibold text-lg text-purple-700\">\n                                                {getNumericValue(formData.periodo_fixa) >= getNumericValue(formData.tempo_emprestimo) ?\n                                                    'N/A (apenas período fixo)' :\n                                                    formatCurrency(obterPrestacaoMapaDivida(formData, getNumericValue(formData.periodo_fixa) * 12 + 1) + totalMonthlyCosts)\n                                                }\n                                            </span>\n                                        </div>\n                                        <div className=\"flex justify-between\">\n                                            <span className=\"text-sm text-gray-600\">Capital em Dívida (início período variável):</span>\n                                            <span className=\"font-medium text-purple-600\">\n                                                {getNumericValue(formData.periodo_fixa) >= getNumericValue(formData.tempo_emprestimo) ?\n                                                    'N/A (apenas período fixo)' :\n                                                    formatCurrency(calcularCapitalRestante(getNumericValue(formData.valor_emprestimo), getNumericValue(formData.taxa_fixa), getNumericValue(formData.periodo_fixa) * 12))\n                                                }\n                                            </span>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n\n                            {/* Custos Detalhados */}\n                            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6\">\n                                {/* Custos Mensais Detalhados */}\n                                <div className=\"data-card\">\n                                    <h4 className=\"font-semibold text-gray-800 mb-3 flex items-center space-x-2\">\n                                        <CreditCard className=\"h-4 w-4 text-emerald-600\" />\n                                        <span>Custos Mensais Detalhados</span>\n                                    </h4>\n                                    <div className=\"space-y-2\">\n                                        <div className=\"flex justify-between\">\n                                            <span className=\"text-sm text-gray-600\">Seguro de Vida:</span>\n                                            <span className=\"font-medium\">{formatCurrency(getNumericValue(formData.seguro_vida))}</span>\n                                        </div>\n                                        <div className=\"flex justify-between\">\n                                            <span className=\"text-sm text-gray-600\">Seguro Multirriscos:</span>\n                                            <span className=\"font-medium\">{formatCurrency(getNumericValue(formData.seguro_multiriscos))}</span>\n                                        </div>\n                                        <div className=\"flex justify-between\">\n                                            <span className=\"text-sm text-gray-600\">Manutenção de Conta:</span>\n                                            <span className=\"font-medium\">{formatCurrency(getNumericValue(formData.manutencao_conta))}</span>\n                                        </div>\n                                        <div className=\"flex justify-between\">\n                                            <span className=\"text-sm text-gray-600\">Outros Custos:</span>\n                                            <span className=\"font-medium\">{formatCurrency(getNumericValue(formData.outros))}</span>\n                                        </div>\n                                        <div className=\"border-t pt-2 flex justify-between font-semibold text-emerald-700\">\n                                            <span>Total Mensal:</span>\n                                            <span>{formatCurrency(totalMonthlyCosts)}</span>\n                                        </div>\n                                    </div>\n                                </div>\n\n                                {/* Custos Iniciais */}\n                                <div className=\"data-card\">\n                                    <h4 className=\"font-semibold text-gray-800 mb-3 flex items-center space-x-2\">\n                                        <Euro className=\"h-4 w-4 text-emerald-600\" />\n                                        <span>Outflow Inicial</span>\n                                    </h4>\n                                    <div className=\"space-y-2\">\n                                        <div className=\"flex justify-between\">\n                                            <span className=\"text-sm text-gray-600\">Prémios de Entrada:</span>\n                                            <span className=\"font-medium text-green-700\">+{formatCurrency(getNumericValue(formData.premios_entrada))}</span>\n                                        </div>\n                                        <div className=\"flex justify-between\">\n                                            <span className=\"text-sm text-gray-600\">Comissões Iniciais:</span>\n                                            <span className=\"font-medium text-orange-700\">-{formatCurrency(getNumericValue(formData.comissoes_iniciais))}</span>\n                                        </div>\n                                        <div className=\"border-t pt-2 flex justify-between font-semibold\">\n                                            <span>Saldo Inicial:</span>\n                                            <span className={`${getNumericValue(formData.premios_entrada) >= getNumericValue(formData.comissoes_iniciais) ? 'text-green-700' : 'text-red-700'}`}>\n                                                {getNumericValue(formData.premios_entrada) >= getNumericValue(formData.comissoes_iniciais) ? '+' : ''}\n                                                {formatCurrency(getNumericValue(formData.premios_entrada) - getNumericValue(formData.comissoes_iniciais))}\n                                            </span>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n\n                            {/* Amortizações Antecipadas */}\n                            {(formData.amortizacoes && formData.amortizacoes.length > 0) && (\n                                <div className=\"data-card mb-6\">\n                                    <h4 className=\"font-semibold text-gray-800 mb-3 flex items-center space-x-2\">\n                                        <TrendingUp className=\"h-4 w-4 text-emerald-600\" />\n                                        <span>Amortizações Antecipadas</span>\n                                    </h4>\n                                    <div className=\"data-grid\">\n                                        <div className=\"data-item\">\n                                            <div className=\"data-label\">Total Amortizações</div>\n                                            <div className=\"data-value\">\n                                                {formatCurrency(formData.amortizacoes.reduce((total, a) => total + a.valor, 0))}\n                                            </div>\n                                        </div>\n                                        <div className=\"data-item\">\n                                            <div className=\"data-label\">Número de Amortizações</div>\n                                            <div className=\"data-value\">\n                                                {formData.amortizacoes.length}\n                                            </div>\n                                        </div>\n                                        <div className=\"data-item\">\n                                            <div className=\"data-label\">Média por Amortização</div>\n                                            <div className=\"data-value\">\n                                                {formatCurrency(formData.amortizacoes.reduce((total, a) => total + a.valor, 0) / formData.amortizacoes.length)}\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            )}\n\n                            {/* Resumo Final */}\n                            <div className=\"bg-blue-50 p-4 rounded-lg border border-blue-200\">\n                                <h4 className=\"font-semibold text-blue-900 mb-3 flex items-center space-x-2\">\n                                    <CheckCircle className=\"h-4 w-4 text-blue-600\" />\n                                    <span>Resumo Final da Proposta</span>\n                                </h4>\n                                <div className=\"data-grid text-sm\">\n                                    <div className=\"data-item\">\n                                        <div className=\"data-label\">Valor Total</div>\n                                        <div className=\"data-value\">{formatCurrency(getNumericValue(formData.valor_emprestimo))}</div>\n                                    </div>\n                                    <div className=\"data-item\">\n                                        <div className=\"data-label\">Custos Anuais</div>\n                                        <div className=\"data-value\">{formatCurrency(totalMonthlyCosts * 12)}</div>\n                                    </div>\n                                    <div className=\"data-item\">\n                                        <div className=\"data-label\">Custos Iniciais</div>\n                                        <div className=\"data-value\">{formatCurrency(getNumericValue(formData.comissoes_iniciais))}</div>\n                                    </div>\n                                    <div className=\"data-item\">\n                                        <div className=\"data-label\">Prémios de Entrada</div>\n                                        <div className=\"data-value\">{formatCurrency(getNumericValue(formData.premios_entrada))}</div>\n                                    </div>\n                                </div>\n                            </div>\n\n\n                        </div>\n                    </div>\n                );\n\n            default:\n                return null;\n        }\n    };\n\n    return (\n        <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4\">\n            <div className=\"bg-white rounded-2xl shadow-2xl w-full max-w-4xl max-h-[95vh] flex flex-col\">\n                {/* Header */}\n                <div className=\"flex-shrink-0 p-6 border-b border-gray-200\">\n                    <div className=\"flex items-center justify-between\">\n                        <div className=\"flex items-center space-x-3\">\n                            <div className=\"p-2 bg-blue-100 rounded-lg\">\n                                <Building2 className=\"h-6 w-6 text-blue-600\" />\n                            </div>\n                            <div>\n                                <h2 className=\"text-xl font-semibold text-gray-900\">\n                                    {isEditing ? 'Editar Banco' : 'Adicionar Novo Banco'}\n                                </h2>\n                                <p className=\"text-sm text-gray-600 mt-1\">\n                                    {newBankName || 'Nome do banco'}\n                                </p>\n                                {Object.keys(errors).length > 0 && (\n                                    <div className=\"flex items-center space-x-1 mt-1\">\n                                        <AlertCircle className=\"h-4 w-4 text-red-500\" />\n                                        <span className=\"text-xs text-red-600 font-medium\">\n                                            {Object.keys(errors).length} erro(s) no formulário\n                                        </span>\n                                    </div>\n                                )}\n                            </div>\n                        </div>\n                        <button\n                            onClick={onCancel}\n                            className=\"p-3 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-xl transition-colors duration-200\"\n                            aria-label=\"Fechar\"\n                        >\n                            <X className=\"h-6 w-6\" />\n                        </button>\n                    </div>\n\n                    {/* Progress Steps */}\n                    <div className=\"mt-6\">\n                        <div className=\"flex items-center justify-center\">\n                            <div className=\"flex items-center space-x-2\">\n                                {steps.map((step, index) => {\n                                    // Verificar se este passo tem erros\n                                    const stepHasErrors = Object.keys(errors).some(field => getFieldStep(field) === step.id);\n\n                                    return (\n                                        <div key={step.id} className=\"flex items-center\">\n                                            <button\n                                                onClick={() => setActiveStep(step.id)}\n                                                className={`flex items-center justify-center w-10 h-10 rounded-full transition-all duration-200 relative ${activeStep === step.id\n                                                    ? 'bg-blue-600 text-white shadow-lg'\n                                                    : activeStep > step.id\n                                                        ? 'bg-green-500 text-white'\n                                                        : 'bg-gray-200 text-gray-500 hover:bg-gray-300'\n                                                    } ${stepHasErrors ? 'ring-2 ring-red-500 ring-offset-2' : ''}`}\n                                            >\n                                                {activeStep > step.id ? (\n                                                    <CheckCircle className=\"h-5 w-5\" />\n                                                ) : (\n                                                    <step.icon className=\"h-5 w-5\" />\n                                                )}\n                                                {stepHasErrors && (\n                                                    <div className=\"absolute -top-1 -right-1 w-4 h-4 bg-red-500 rounded-full flex items-center justify-center\">\n                                                        <span className=\"text-xs text-white font-bold\">\n                                                            {Object.keys(errors).filter(field => getFieldStep(field) === step.id).length}\n                                                        </span>\n                                                    </div>\n                                                )}\n                                            </button>\n                                            {index < steps.length - 1 && (\n                                                <div className={`w-12 h-0.5 mx-2 rounded-full ${activeStep > step.id ? 'bg-green-400' : 'bg-gray-300'\n                                                    }`} />\n                                            )}\n                                        </div>\n                                    );\n                                })}\n                            </div>\n                        </div>\n                        <div className=\"mt-3 text-center\">\n                            <span className=\"text-sm font-medium text-gray-700\">\n                                {steps[activeStep - 1].title}\n                            </span>\n                        </div>\n                    </div>\n                </div>\n\n                {/* Content */}\n                <div className=\"flex-1 overflow-y-auto p-6 pb-4\">\n                    <form onSubmit={handleSubmit} className=\"space-y-6\">\n                        {renderStepContent()}\n                    </form>\n                </div>\n\n                {/* Footer */}\n                <div className=\"flex-shrink-0 p-4 border-t border-gray-200 bg-gray-50\">\n                    <div className=\"flex flex-col sm:flex-row justify-between items-center space-y-4 sm:space-y-0 sm:space-x-4\">\n                        <div className=\"flex items-center space-x-2 text-sm text-gray-600\">\n                            <span>Passo {activeStep} de {steps.length}</span>\n                        </div>\n\n                        <div className=\"flex flex-col sm:flex-row space-y-3 sm:space-y-0 sm:space-x-3 w-full sm:w-auto\">\n                            {!isEditing && (\n                                <button\n                                    type=\"button\"\n                                    onClick={onCancel}\n                                    className=\"btn-secondary w-full sm:w-auto flex items-center justify-center space-x-2\"\n                                    disabled={isSubmitting}\n                                >\n                                    <X className=\"h-4 w-4\" />\n                                    <span>Cancelar</span>\n                                </button>\n                            )}\n\n                            {activeStep > 1 && (\n                                <button\n                                    type=\"button\"\n                                    onClick={() => setActiveStep(activeStep - 1)}\n                                    className=\"btn-secondary w-full sm:w-auto flex items-center justify-center space-x-2\"\n                                >\n                                    <ChevronLeft className=\"h-4 w-4\" />\n                                    <span>Anterior</span>\n                                </button>\n                            )}\n\n                            {activeStep < steps.length ? (\n                                <button\n                                    type=\"button\"\n                                    onClick={() => setActiveStep(activeStep + 1)}\n                                    className=\"btn-primary w-full sm:w-auto flex items-center justify-center space-x-2\"\n                                >\n                                    <span>Próximo</span>\n                                    <ChevronRight className=\"h-4 w-4\" />\n                                </button>\n                            ) : (\n                                <button\n                                    type=\"button\"\n                                    className=\"btn-success w-full sm:w-auto flex items-center justify-center space-x-2\"\n                                    disabled={isSubmitting}\n                                    onClick={() => {\n                                        // Validar o formulário antes de submeter\n                                        if (!validateForm()) {\n                                            // Se há erros, o usuário será redirecionado para o passo com erro\n                                            // e os erros serão exibidos no passo 4\n                                            return;\n                                        }\n                                        handleSubmit({ preventDefault: () => { } } as any);\n                                    }}\n                                >\n                                    {isSubmitting ? (\n                                        <>\n                                            <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white\"></div>\n                                            <span>Guardando...</span>\n                                        </>\n                                    ) : (\n                                        <>\n                                            <Save className=\"h-4 w-4\" />\n                                            <span>{isEditing ? 'Atualizar Banco' : 'Adicionar Banco'}</span>\n                                        </>\n                                    )}\n                                </button>\n                            )}\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}